<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="etools-prp-number.html">
<link rel="import" href="../behaviors/localize.html">

<dom-module id="chart-legend">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        display: block;
      }

      .legend {
        padding: 0;
        margin: 0;
        list-style: none;
        font-size: 12px;
        line-height: 1;
      }

      .legend-row {
        padding: 0 .5em .5em;
        border-bottom: 1px solid var(--paper-grey-200);
      }

      .legend-row:not(:last-child) {
        margin-bottom: .75em;
      }

      .color {
        display: inline-block;
        vertical-align: middle;
        width: .5em;
        height: 1.25em;
        margin-right: .25em;
        position: relative;
        top: -1px;
      }
    </style>

    <ul class="legend">
      <template
          is="dom-repeat"
          items="[[rows]]">
        <li class="legend-row layout horizontal justified">
          <span>
            <span
                class="color"
                style="background: [[_getColor(colors, index)]];">
            </span>
            [[localize(item.0)]]
          </span>
          <etools-prp-number value="[[item.1]]"></etools-prp-number>
        </li>
      </template>
    </ul>
  </template>

  <script>
    Polymer({
      is: 'chart-legend',

      behaviors: [
        App.Behaviors.ReduxBehavior,
        App.Behaviors.LocalizeBehavior,
        Polymer.AppLocalizeBehavior,
      ],

      properties: {
        rows: {
          type: Array,
          value: [],
        },

        colors: {
          type: Array,
          value: [],
        },
      },

      _getColor: function (colors, index) {
        return colors[index];
      },
    });
  </script>
</dom-module>
