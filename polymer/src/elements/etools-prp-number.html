<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/numeral-js/numeral-js.html">

<link rel="import" href="../constants.html">

<dom-module id="etools-prp-number">
  <template>
    <template
        is="dom-if"
        if="[[!_noValue(value)]]"
        restamp="true">
      <numeral-js number="[[value]]" format="[[_finalFormat]]" print></numeral-js>
    </template>
    <template
        is="dom-if"
        if="[[_noValue(value)]]"
        restamp="true">
      0
    </template>
  </template>

  <script>
    Polymer({
      is: 'etools-prp-number',

      properties: {
        value: {
          type: Number,
          value: null,
        },

        overrideFormat: {
          type: String,
          value: '',
        },

        _defaultFormat: {
          type: String,
          value: App.Constants.FORMAT_NUMBER_DEFAULT,
        },

        _finalFormat: {
          type: String,
          computed: '_computeFinalFormat(_defaultFormat, overrideFormat)',
        },
      },

      _noValue: function (value) {
        return value == null; // jshint ignore:line
      },

      _computeFinalFormat: function (_defaultFormat, overrideFormat) {
        return overrideFormat || _defaultFormat;
      },
    });
  </script>
</dom-module>
