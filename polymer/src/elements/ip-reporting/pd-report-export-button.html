<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">

<link rel="import" href="../../endpoints.html">
<link rel="import" href="../../styles/buttons.html">

<dom-module id="pd-report-export-button">
  <template>
    <style include="button-styles">
      a {
        color: var(--theme-primary-color);
        text-decoration: none;
      }

      paper-button {
        text-transform: uppercase;
      }
    </style>

    <a
        href="[[fileUrl]]"
        target="_blank"
        tabindex="-1">
      <paper-button class="btn-primary">Download report in standard template format</paper-button>
    </a>
  </template>

  <script>
    Polymer({
      id: 'pd-report-export-button',

      behaviors: [
        App.Behaviors.ReduxBehavior,
      ],

      properties: {
        locationId: {
          type: String,
          statePath: 'location.id',
        },

        reportId: {
          type: String,
          statePath: 'programmeDocumentReports.current.id',
        },

        fileUrl: {
          type: String,
          computed: '_computeFileUrl(locationId, reportId)',
        },
      },

      _computeFileUrl: App.Endpoints.reportExport.bind(App.Endpoints),
    });
  </script>
</dom-module>
