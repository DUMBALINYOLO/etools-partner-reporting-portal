<script>
  (function () {
    'use strict';

    App.Behaviors = App.Behaviors || {};

    App.Behaviors.User = {
      properties: {
        _$currentPlan: {
          type: String,
          statePath: 'responsePlans.currentID',
        },

        _$prpRoles: {
          type: Array,
          statePath: 'userProfile.profile.prp_roles'
        },

        currentRole: {
          type: Object,
          computed: '_computeCurrentRole(_$currentPlan, _$prpRoles)'
        }
      },

      _computeCurrentRole: function (clusterId, roles) {
        var id = parseInt(clusterId);

        return roles.find(role => role.role === App.Constants.PRP_ROLE.CLUSTER_SYSTEM_ADMIN ||
          (role.cluster && role.cluster.id === id)).role;
      },
    };

  }());
</script>
